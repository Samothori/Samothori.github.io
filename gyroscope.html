<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      span {
        display: block;
      }

      #d1 {
        position: absolute;
        top: 0;
        left: 20%;
        width: 60%;
        word-break: break-all;
        font-size: 5rem;
      }
      #d2 {
        background-color: yellow;
        position: absolute;
        top: 0;
        left: 20%;
        width: 60%;
        word-break: break-all;
        font-size: 5rem;
      }
    </style>
  </head>
  <body>
    <header>
      v2
    </header>
    <span id="velocityx"></span>
    <span id="velocityy"></span>
    <span id="velocityz"></span>
    <div id="d1">MOTION DESIGN</div>
    <div id="d2"></div>

    <script>
      //let gyroscope = new Gyroscope({ frequency: 3 });
      let velocityx = document.querySelector('#velocityx');
      let velocityy = document.querySelector('#velocityy');
      let velocityz = document.querySelector('#velocityz');
      let d1 = document.querySelector('#d1');
      let d2 = document.querySelector('#d2');
      /*
            gyroscope.addEventListener('reading', e => {
              velocityx.innerHTML = gyroscope.x;
              velocityy.innerHTML = gyroscope.y;
              velocityz.innerHTML = gyroscope.z;
              /*if (gyroscope.x < 0) {
                d1.style.top = '10px';
                d1.style.backgroundColor = 'yellow';
              }
              if (gyroscope.x > 0) {
                d1.style.top = '95%';
                d1.style.backgroundColor = 'red';
              }
              if (gyroscope.y < 0) d1.style.left = '10px';
              if (gyroscope.y > 0) d1.style.left = '95%';
              console.log('Angular velocity along the X-axis ' + gyroscope.x);
              console.log('Angular velocity along the Y-axis ' + gyroscope.y);
              console.log('Angular velocity along the Z-axis ' + gyroscope.z);
            });
            gyroscope.start();
      */

      let maxX = window.innerWidth - d1.clientWidth / 2,
        maxY = window.innerHeight - d1.clientHeight / 2;

      function handleOrientation(event) {
        var x = event.beta, // En degré sur l'interval [-180,180].
          y = event.gamma; // En degré sur l'interval [-90,90].

        velocityx.innerHTML = 'beta : ' + x + '<br />';
        velocityx.innerHTML += 'gamma: ' + y + '<br />';

        // Parce-que l'on ne veut pas avoir l'appareil à l'envers.
        // On restreint les valeurs de x à l'intervalle [-90,90].
        if (x > 90) {
          x = 90;
        }
        if (x < -90) {
          x = -90;
        }
        // Pour rendre le calcul plus simple.
        // On délimite l'intervalle de x et y sur [0, 180].
        x += 90;
        y += 90;

        // 10 est la moitié de la taille de la balle.
        // Cela centre le point de positionnement au centre de la balle.

        d1.style.top = (maxX * x) / 180 + 'px';
        d1.style.left = (maxY * y) / 180 + 'px';
        d2.style.top = -(maxX * x) / 180 + 'px';
        d2.style.left = -(maxY * y) / 180 + 'px';
      }

      window.addEventListener('deviceorientation', handleOrientation);
    </script>
  </body>
</html>
