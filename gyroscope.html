<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      span {
        display: block;
      }

      #d1 {
        position: absolute;
        top: 0;
        left: 20%;
        width: 60%;
        word-break: break-all;
        font-size: 5rem;
      }
      #d2 {
        background-color: yellow;
        position: absolute;
        top: 0;
        left: 20%;
        width: 60%;
        min-height: 200px;
        word-break: break-all;
        font-size: 5rem;
      }
    </style>
  </head>
  <body>
    <header>
      v4
    </header>
    <span id="velocityx"></span>

    <div id="d1">MOTION DESIGN</div>
    <div id="d2"></div>

    <script>
      //let gyroscope = new Gyroscope({ frequency: 3 });
      let velocityx = document.querySelector('#velocityx');

      let d1 = document.querySelector('#d1');
      let d2 = document.querySelector('#d2');

      let maxX = window.innerWidth - d1.clientWidth,
        maxY = window.innerHeight - d1.clientHeight;

      // ex 320px - 200 = 120px
      function handleOrientation(event) {
        var x = event.beta, // En degré sur l'interval [-180,180].
          y = event.gamma; // En degré sur l'interval [-90,90].

        velocityx.innerHTML = 'beta : ' + x + '<br />';
        velocityx.innerHTML += 'gamma: ' + y + '<br />';

        // Parce-que l'on ne veut pas avoir l'appareil à l'envers.
        // On restreint les valeurs de x à l'intervalle [-90,90].
        if (x > 90) {
          x = 90;
        }
        if (x < -90) {
          x = -90;
        }
        // Pour rendre le calcul plus simple.
        // On délimite l'intervalle de x et y sur [0, 180].
        /* x += 90;
        y += 90;*/

        d1.style.top = maxX / 2 + ((maxX / 2) * x) / 90 + 'px';
        d1.style.left = maxX / 2 + ((maxX / 2) * y) / 90 + 'px';
        d2.style.top = -(maxX * x) / 90 + 'px';
        d2.style.left = -(maxY * y) / 180 + 'px';
      }

      window.addEventListener('deviceorientation', handleOrientation);
    </script>
  </body>
</html>
